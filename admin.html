<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Pintu's eCommerce</title>
<style>
body{font-family:Arial,sans-serif;background:#f0f0f0;margin:0;padding:0;}
.container{max-width:1200px;margin:auto;padding:20px;background:#fff;}
h2{margin-top:0;color:#333;border-bottom:1px solid #ccc;padding-bottom:5px;}
section{margin-bottom:30px;padding:10px;border:1px solid #ccc;border-radius:8px;background:#fafafa;}
label{display:block;margin:5px 0;font-weight:bold;}
input, select{width:100%;padding:5px;margin-bottom:10px;}
button{padding:7px 12px;margin-right:5px;background:#ff3b3b;color:#fff;border:none;border-radius:5px;cursor:pointer;}
button.delete{background:#555;}
.item-list{margin-top:10px;}
.item{display:flex;align-items:center;justify-content:space-between;padding:5px;margin:5px 0;background:#fff;border:1px solid #ddd;border-radius:5px;}
.item img{width:50px;height:50px;object-fit:cover;margin-right:10px;}
.flex-row{display:flex;gap:10px;flex-wrap:wrap;}
.flex-row>div{flex:1;}
</style>
</head>
<body>
<div class="container">
<h1>Admin Panel</h1>

<!-- Header Image -->
<section>
<h2>Header Image</h2>
<label>Upload Image</label>
<input type="file" id="headerFile" accept="image/*">
<label>Size %</label>
<input type="number" id="headerSize" value="100">
<button id="saveHeader">Save Header</button>
</section>

<!-- Static Image -->
<section>
<h2>Static Image</h2>
<label>Upload Image</label>
<input type="file" id="staticFile" accept="image/*">
<label>Size %</label>
<input type="number" id="staticSize" value="100">
<button id="saveStatic">Save Static</button>
</section>

<!-- Slider Images -->
<section>
<h2>Slider Images</h2>
<div id="sliderList" class="item-list"></div>
<input type="file" id="sliderFile" accept="image/*">
<button id="addSlider">Add Slider Image</button>
</section>

<!-- Countdown & Sell -->
<section>
<h2>Countdown & Sell Button</h2>
<div class="flex-row">
<div>
<label>Sale Text</label>
<input type="text" id="saleTextInput">
<label>Sale Text Color</label>
<input type="text" id="saleColorInput" placeholder="#ff0000">
</div>
<div>
<label>Timer Minutes</label>
<input type="number" id="timerMinutesInput" value="20">
<label>Timer Background Color</label>
<input type="text" id="timerBgInput" placeholder="#ffffff">
</div>
<div>
<label>Sell Button Text</label>
<input type="text" id="sellTextInput">
<label>Sell Button Text Color</label>
<input type="text" id="sellTextColorInput" placeholder="#ffffff">
<label>Sell Button Background</label>
<input type="text" id="sellBgColorInput" placeholder="#ff3b3b">
</div>
</div>
<button id="saveCountdown">Save Countdown/Sell</button>
</section>

<!-- Product Grid -->
<section>
<h2>Products</h2>
<div id="productList" class="item-list"></div>
<input type="text" id="prodName" placeholder="Product Name">
<input type="file" id="prodImageFile" accept="image/*">
<input type="number" id="prodOldPrice" placeholder="Old Price">
<input type="number" id="prodNewPrice" placeholder="New Price">
<input type="number" id="prodDiscount" placeholder="Discount %">
<button id="addProduct">Add Product</button>
</section>
</div>

<script>
// Utility to convert file to base64
function fileToBase64(file, callback){
  const reader = new FileReader();
  reader.onload = e => callback(e.target.result);
  reader.readAsDataURL(file);
}

// Header Image
document.getElementById('saveHeader').onclick = ()=>{
  const file = document.getElementById('headerFile').files[0];
  if(file){
    fileToBase64(file, base64=>{
      localStorage.setItem('headerImage', base64);
      localStorage.setItem('heroSize', document.getElementById('headerSize').value);
      alert('Header Saved');
    });
  }
}

// Static Image
document.getElementById('saveStatic').onclick = ()=>{
  const file = document.getElementById('staticFile').files[0];
  if(file){
    fileToBase64(file, base64=>{
      localStorage.setItem('staticImage', base64);
      localStorage.setItem('staticSize', document.getElementById('staticSize').value);
      alert('Static Saved');
    });
  }
}

// Slider Images
function renderSlider(){
  const list = document.getElementById('sliderList');
  list.innerHTML='';
  const sliders = JSON.parse(localStorage.getItem('sliderImages')||'[]');
  sliders.forEach((img,i)=>{
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML=`<img src="${img}" alt="slider"><span>Slider ${i+1}</span>
    <button class="delete" onclick="deleteSlider(${i})">Delete</button>`;
    list.appendChild(div);
  });
}
function deleteSlider(i){
  let sliders = JSON.parse(localStorage.getItem('sliderImages')||'[]');
  sliders.splice(i,1);
  localStorage.setItem('sliderImages',JSON.stringify(sliders));
  renderSlider();
}
document.getElementById('addSlider').onclick = ()=>{
  const file = document.getElementById('sliderFile').files[0];
  if(file){
    fileToBase64(file, base64=>{
      let sliders = JSON.parse(localStorage.getItem('sliderImages')||'[]');
      sliders.push(base64);
      localStorage.setItem('sliderImages',JSON.stringify(sliders));
      document.getElementById('sliderFile').value='';
      renderSlider();
    });
  }
}
renderSlider();

// Countdown & Sell
document.getElementById('saveCountdown').onclick = ()=>{
  localStorage.setItem('saleText', document.getElementById('saleTextInput').value);
  localStorage.setItem('saleTextColor', document.getElementById('saleColorInput').value);
  localStorage.setItem('timerMinutes', document.getElementById('timerMinutesInput').value);
  localStorage.setItem('timerBgColor', document.getElementById('timerBgInput').value);
  localStorage.setItem('sellText', document.getElementById('sellTextInput').value);
  localStorage.setItem('sellTextColor', document.getElementById('sellTextColorInput').value);
  localStorage.setItem('sellBgColor', document.getElementById('sellBgColorInput').value);
  alert('Countdown & Sell Saved');
}

// Product Grid
function renderProducts(){
  const list = document.getElementById('productList');
  list.innerHTML='';
  const products = JSON.parse(localStorage.getItem('products')||'[]');
  products.forEach((p,i)=>{
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML=`<img src="${p.image}" alt="${p.name}"><span>${p.name} | â‚¹${p.newPrice} | ${p.discount}%</span>
    <div>
    <button onclick="editProduct(${i})">Edit</button>
    <button class="delete" onclick="deleteProduct(${i})">Delete</button>
    </div>`;
    list.appendChild(div);
  });
}
function deleteProduct(i){
  let products = JSON.parse(localStorage.getItem('products')||'[]');
  products.splice(i,1);
  localStorage.setItem('products',JSON.stringify(products));
  renderProducts();
}
function editProduct(i){
  let products = JSON.parse(localStorage.getItem('products')||'[]');
  const p = products[i];
  document.getElementById('prodName').value = p.name;
  document.getElementById('prodOldPrice').value = p.oldPrice;
  document.getElementById('prodNewPrice').value = p.newPrice;
  document.getElementById('prodDiscount').value = p.discount;

  // Create temporary invisible input for editing image
  const tempInput = document.createElement('input');
  tempInput.type='file';
  tempInput.onchange = e=>{
    fileToBase64(e.target.files[0], base64=>{
      document.getElementById('prodImageFile').dataset.base64 = base64;
    });
  }
  document.body.appendChild(tempInput);
  tempInput.click();
  tempInput.remove();

  deleteProduct(i);
}
document.getElementById('addProduct').onclick = ()=>{
  const name=document.getElementById('prodName').value;
  const oldPrice=document.getElementById('prodOldPrice').value;
  const newPrice=document.getElementById('prodNewPrice').value;
  const discount=document.getElementById('prodDiscount').value;
  const file=document.get
