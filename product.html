<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Page</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#f4f4f4;}
header img{width:100%;height:auto;object-fit:cover;}
#slider img{width:100%;display:none;object-fit:cover;}
#slider img.active{display:block;}
.details{padding:10px;}
.oldPrice{color:gray;text-decoration:line-through;margin-right:5px;}
.newPrice{font-weight:bold;color:#000;}
.discount{color:green;font-weight:bold;}
.storage{padding:10px;}
.bottom-images{display:flex;gap:5px;padding:10px;}
.bottom-images img{width:32%;object-fit:cover;}
.buttons{display:flex;gap:5px;padding:10px;position:fixed;bottom:0;width:100%;background:#fff;}
#addCart{flex:1;background:#ff3b3b;color:#fff;padding:10px;border:none;border-radius:5px;cursor:pointer;}
#buyNow{flex:1;background:#FFD700;color:#000;padding:10px;border:none;border-radius:5px;cursor:pointer;}
#countdown{padding:10px;background:#FFA500;color:#fff;font-weight:bold;}
</style>
</head>
<body>

<header>
  <img id="headerImage" src="" alt="Header">
</header>

<div id="slider"></div>

<div class="storage">
  <label>Select Storage:</label>
  <select id="storageSelect">
    <option value="128GB">128GB</option>
    <option value="256GB">256GB</option>
    <option value="512GB">512GB</option>
    <option value="1TB">1TB</option>
  </select>
</div>

<div class="details" id="productDetails"></div>

<div id="countdown">Time Left: <span id="timer">20:00</span></div>

<div class="bottom-images" id="bottomImages"></div>

<div class="buttons">
  <button id="addCart">Add to Cart</button>
  <button id="buyNow">Buy Now</button>
</div>

<script>
// Product ID
const params = new URLSearchParams(window.location.search);
const id = params.get('id') || 0;

// Load product details
const products = JSON.parse(localStorage.getItem('products')||'[]');
const product = products[id] || {name:'Product', oldPrice:1000, newPrice:499, discount:50};

const details = document.getElementById('productDetails');
details.innerHTML = `
  <h2>${product.name}</h2>
  <p><span class="oldPrice">₹${product.oldPrice}</span><span class="newPrice">₹${product.newPrice}</span></p>
  <p class="discount">${product.discount}% OFF</p>
`;

// Header image
const headerImg = document.getElementById('headerImage');
headerImg.src = localStorage.getItem('product_'+id+'_header') || 'https://via.placeholder.com/1200x200?text=Header+Image';

// Slider images
const sliderContainer = document.getElementById('slider');
const sliderImages = JSON.parse(localStorage.getItem('product_'+id+'_slider')||'[]');
if(sliderImages.length>0){
  sliderImages.forEach((img,i)=>{
    const image = document.createElement('img');
    image.src = img;
    if(i===0) image.classList.add('active');
    sliderContainer.appendChild(image);
  });
  let current = 0;
  setInterval(()=>{
    const imgs = sliderContainer.querySelectorAll('img');
    imgs[current].classList.remove('active');
    current = (current+1)%imgs.length;
    imgs[current].classList.add('active');
  },3000);
}

// Countdown
let countdown = parseInt(localStorage.getItem('product_'+id+'_timerMinutes')||20)*60;
const timerEl = document.getElementById('timer');
setInterval(()=>{
  const m = Math.floor(countdown/60);
  const s = countdown%60;
  timerEl.innerText = `${m}:${s<10?'0'+s:s}`;
  countdown--;
  if(countdown<0) countdown=0;
},1000);

// Bottom images
const bottomContainer = document.getElementById('bottomImages');
const bottomImages = JSON.parse(localStorage.getItem('product_'+id+'_bottom')||'[]');
if(bottomImages.length>0){
  bottomImages.forEach(img=>{
    const image = document.createElement('img');
    image.src = img;
    bottomContainer.appendChild(image);
  });
} else {
  for(let i=1;i<=3;i++){
    const img = document.createElement('img');
    img.src = `https://via.placeholder.com/200x100?text=Image${i}`;
    bottomContainer.appendChild(img);
  }
}

// Buttons
document.getElementById('addCart').onclick = ()=>{
  window.location.href = 'nextpage.html';
}
document.getElementById('buyNow').onclick = ()=>{
  window.location.href = 'nextpage.html';
}
</script>
</body>
</html>
