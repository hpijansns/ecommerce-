<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Page</title>
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#f4f4f4;}
header img{width:100%;object-fit:cover;}
#slider{width:100%;overflow:hidden;position:relative;margin:10px 0;}
#slider img{width:100%;display:none;object-fit:cover;}
#slider img.active{display:block;}
#storage{display:flex;gap:10px;margin:10px 0;flex-wrap:wrap;}
#storage label{flex:1;background:#ddd;padding:10px;text-align:center;border-radius:5px;cursor:pointer;}
#storage input{display:none;}
.details{background:#fff;padding:10px;margin:10px 0;border-radius:8px;}
.details .discount{color:green;font-weight:bold;}
.details .oldPrice{color:gray;text-decoration:line-through;margin-right:5px;}
.countdown{padding:10px;text-align:center;border-radius:5px;margin:10px 0;color:#fff;}
.bottom-images img{width:100%;object-fit:cover;margin:10px 0;}
.buttons{display:flex;gap:10px;position:fixed;bottom:0;width:100%;padding:10px;background:#fff;z-index:100;}
.buttons button{flex:1;padding:15px;font-size:16px;border:none;border-radius:5px;cursor:pointer;}
#addCart{background:#ff3b3b;color:#fff;}
#buyNow{background:yellow;color:#000;}
</style>
</head>
<body>

<!-- Header -->
<header>
<img id="headerImage" src="" alt="Header">
</header>

<!-- Slider -->
<div id="slider"></div>

<!-- Storage Options -->
<div id="storage"></div>

<!-- Product Details -->
<div class="details" id="productDetails"></div>

<!-- Countdown -->
<div class="countdown" id="countdown"></div>

<!-- Bottom Images -->
<div class="bottom-images" id="bottomImages"></div>

<!-- Buttons -->
<div class="buttons">
<button id="addCart">Add to Cart</button>
<button id="buyNow">Buy Now</button>
</div>

<script>
// Get product ID from URL
const params = new URLSearchParams(window.location.search);
const id = params.get('id') || 0;
const key = 'product_'+id+'_';

// Header
const headerImg = localStorage.getItem('header_global') || 'https://via.placeholder.com/1200x300?text=Header';
document.getElementById('headerImage').src = headerImg;

// Slider
const sliderImgs = JSON.parse(localStorage.getItem(key+'slider')||'[]');
const sliderContainer = document.getElementById('slider');
if(sliderImgs.length>0){
    sliderImgs.forEach((src,i)=>{
        const img = document.createElement('img');
        img.src = src;
        if(i===0) img.classList.add('active');
        sliderContainer.appendChild(img);
    });
    let current=0;
    setInterval(()=>{
        const imgs = sliderContainer.querySelectorAll('img');
        imgs[current].classList.remove('active');
        current = (current+1)%imgs.length;
        imgs[current].classList.add('active');
    },3000);
} else {
    const img=document.createElement('img');
    img.src='https://via.placeholder.com/1200x400?text=Slider';
    img.classList.add('active');
    sliderContainer.appendChild(img);
}

// Storage / Size
const sizeList = JSON.parse(localStorage.getItem(key+'sizes')||'[]');
const storageContainer = document.getElementById('storage');
sizeList.forEach(size=>{
    const label=document.createElement('label');
    label.innerHTML=`<input type="radio" name="storage" value="${size}">${size}`;
    storageContainer.appendChild(label);
});
if(storageContainer.firstChild) storageContainer.firstChild.querySelector('input').checked=true;

// Product Details
let products = JSON.parse(localStorage.getItem('products')||'[]');
let product = products[id] || {name:'Product '+(parseInt(id)+1), oldPrice:1000, newPrice:799, discount:20, detail:'Product description here'};
const detailsDiv = document.getElementById('productDetails');
detailsDiv.innerHTML=`
<h2>${product.name}</h2>
<p><span class="oldPrice">₹${product.oldPrice}</span> <span class="newPrice">₹${product.newPrice}</span></p>
<p class="discount">${product.discount}% OFF</p>
<p>${product.detail}</p>
`;

// Countdown
let countdown = parseInt(localStorage.getItem(key+'timerMinutes')||15*60);
const countdownDiv = document.getElementById('countdown');
countdownDiv.style.background = localStorage.getItem(key+'timerBg') || '#FFA500';
function updateCountdown(){
    const m=Math.floor(countdown/60);
    const s=countdown%60;
    countdownDiv.textContent=`Time Left: ${m}:${s<10?'0'+s:s}`;
    countdown--;
    if(countdown<0) countdown=0;
}
updateCountdown();
setInterval(updateCountdown,1000);

// Bottom Images
const bottomImgs = JSON.parse(localStorage.getItem(key+'bottom')||'[]');
const bottomContainer = document.getElementById('bottomImages');
if(bottomImgs.length>0){
    bottomImgs.forEach(src=>{
        const img=document.createElement('img');
        img.src=src;
        bottomContainer.appendChild(img);
    });
} else {
    for(let i=1;i<=3;i++){
        const img=document.createElement('img');
        img.src=`https://via.placeholder.com/1200x200?text=Bottom+${i}`;
        bottomContainer.appendChild(img);
    }
}

// Buttons Click
document.getElementById('addCart').onclick=document.getElementById('buyNow').onclick=()=>{
    window.location.href='https://hpijansns.github.io/ecommerce-/add-address.html';
}
</script>
</body>
</html>
