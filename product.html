<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Detail</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:0;}
header{background:#2874f0;color:white;padding:15px;text-align:center;}
.container{padding:20px;max-width:600px;margin:auto;}
img{width:100%;height:auto;max-height:300px;object-fit:cover;}
.badge{padding:3px 7px;color:white;border-radius:4px;}
button{padding:8px 15px;background:#2874f0;color:white;border:none;border-radius:3px;cursor:pointer;margin-top:10px;}
</style>
</head>
<body>

<header>
<h1>Product Detail</h1>
</header>

<div class="container" id="product-detail"></div>

<script>
const params = new URLSearchParams(window.location.search);
const id = parseInt(params.get('id'));
let products = JSON.parse(localStorage.getItem('products')) || [];
const product = products.find(p=>p.id===id);

if(product){
  const container = document.getElementById('product-detail');
  const badgeColor = product.grade==='Ultra'?'#ff4d4d':product.grade==='Premium'?'#ffa500':'#4caf50';
  container.innerHTML=`
    <img src="${product.image}" alt="${product.name}">
    <h2>${product.name} <span class="badge" style="background:${badgeColor}">${product.grade}</span></h2>
    <p>â‚¹${product.price}</p>
    <p>${product.desc || ''}</p>
    <button onclick="addToCart(${product.id})">Add to Cart</button>
    <button onclick="window.history.back()">Back</button>
  `;
} else {
  document.getElementById('product-detail').innerHTML='<p>Product not found!</p>';
}

function addToCart(id){
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  const existing = cart.find(item=>item.id===id);
  if(existing){ existing.qty++; }
  else{ cart.push({id:id, qty:1}); }
  localStorage.setItem('cart', JSON.stringify(cart));
  alert('Added to cart!');
}
</script>

</body>
</html>
