<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Page</title>
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#f4f4f4;}
header img{width:100%;height:auto;display:block;object-fit:cover;border-bottom:1px solid #ddd;}
#productSlider{width:100%;overflow:hidden;position:relative;margin:10px 0;}
#productSlider img{width:100%;display:none;object-fit:cover;border-radius:8px;}
#productSlider img.active{display:block;}
#storageOptions{margin:10px;padding:0 10px;}
.storage-btn{padding:8px 12px;margin:5px;border:1px solid #ccc;border-radius:5px;cursor:pointer;display:inline-block;}
#productDetails{background:#fff;padding:10px;margin:10px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
#countdownSection{background:#fff;padding:10px;margin:10px;border-radius:8px;display:flex;align-items:center;justify-content:space-between;}
#bottomImages{margin:10px;padding:0 10px;display:flex;flex-direction:column;gap:10px;}
#bottomImages img{width:100%;border-radius:5px;object-fit:cover;}
.action-buttons{position:fixed;bottom:0;left:0;width:100%;display:flex;}
.action-buttons button{flex:1;padding:15px;font-size:16px;border:none;cursor:pointer;}
#addToCart{background:#ff3b3b;color:#fff;}
#buyNow{background:yellow;color:#000;}
</style>
</head>
<body>

<!-- 1. Header Image -->
<header>
  <img id="headerImage" src="" alt="Header Image">
</header>

<!-- 2. Product Image Slider -->
<section id="productSlider"></section>

<!-- 3. Storage Options -->
<div id="storageOptions"></div>

<!-- 4. Product Details -->
<div id="productDetails">
  <h2 id="prodName"></h2>
  <p><span id="oldPrice"></span> <span id="newPrice"></span> <span id="discount"></span></p>
  <p id="prodDesc"></p>
</div>

<!-- 5. Countdown -->
<div id="countdownSection">
  <span id="saleText"></span>
  <span id="timer"></span>
  <button id="sellBtn"></button>
</div>

<!-- 6. Bottom 3 Images -->
<div id="bottomImages"></div>

<!-- 7. Bottom Fixed Buttons -->
<div class="action-buttons">
  <button id="addToCart">Add to Cart</button>
  <button id="buyNow">Buy Now</button>
</div>

<script>
// Get product ID from URL
const params = new URLSearchParams(window.location.search);
const id = params.get('id');
const products = JSON.parse(localStorage.getItem('products')||'[]');
const product = products[id];

if(product){
  // 1. Header Image
  if(product.headerImage) document.getElementById('headerImage').src = product.headerImage;

  // 2. Product Image Slider
  const sliderContainer = document.getElementById('productSlider');
  const sliderImages = product.extraImages || [];
  sliderImages.forEach((src,i)=>{
    const img = document.createElement('img');
    img.src = src;
    if(i===0) img.classList.add('active');
    sliderContainer.appendChild(img);
  });
  let current = 0;
  setInterval(()=>{
    const imgs = sliderContainer.querySelectorAll('img');
    if(imgs.length===0) return;
    imgs[current].classList.remove('active');
    current = (current+1)%imgs.length;
    imgs[current].classList.add('active');
  },3000);

  // 3. Storage Options
  const storageDiv = document.getElementById('storageOptions');
  (product.storages||[]).forEach(s=>{
    const btn = document.createElement('div');
    btn.className='storage-btn';
    btn.innerText = s;
    storageDiv.appendChild(btn);
  });

  // 4. Product Details
  document.getElementById('prodName').innerText = product.name || '';
  document.getElementById('oldPrice').innerText = product.oldPrice ? `₹${product.oldPrice}` : '';
  document.getElementById('newPrice').innerText = product.newPrice ? `₹${product.newPrice}` : '';
  document.getElementById('discount').innerText = product.discount ? `${product.discount}% OFF` : '';
  document.getElementById('prodDesc').innerText = product.description || '';

  // 5. Countdown Timer & Sell Button
  const saleText = product.saleText || 'Sale of the Day';
  const saleColor = product.saleTextColor || '#ff3b3b';
  const timerMinutes = parseInt(product.timerMinutes||20);
  const timerBg = product.timerBgColor || '#fff';
  const sellText = product.sellText || 'Buy Now';
  const sellTextColor = product.sellTextColor || '#fff';
  const sellBg = product.sellBgColor || '#ff3b3b';

  document.getElementById('saleText').innerText = saleText;
  document.getElementById('saleText').style.color = saleColor;
  document.getElementById('timer').style.backgroundColor = timerBg;
  document.getElementById('sellBtn').innerText = sellText;
  document.getElementById('sellBtn').style.color = sellTextColor;
  document.getElementById('sellBtn').style.backgroundColor = sellBg;

  let countdown = timerMinutes*60;
  const timerEl = document.getElementById('timer');
  const interval = setInterval(()=>{
    const m = Math.floor(countdown/60);
    const s = countdown%60;
    timerEl.innerText = `${m}:${s<10?'0'+s:s}`;
    countdown--;
    if(countdown<0) clearInterval(interval);
  },1000);

  // 6. Bottom 3 Images
  const bottomDiv = document.getElementById('bottomImages');
  (product.bottomImages||[]).forEach(src=>{
    const img = document.createElement('img');
    img.src = src;
    bottomDiv.appendChild(img);
  });

  // 7. Bottom Buttons Navigation - BOTH go to same page
  const nextPage = 'checkout.html?id='+id; // donon same page
  document.getElementById('addToCart').onclick = ()=>{
    window.location.href = nextPage;
  };
  document.getElementById('buyNow').onclick = ()=>{
    window.location.href = nextPage;
  };
}
</script>
</body>
</html>
